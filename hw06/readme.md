## Выполнение домашнего задания

Разработан отдельный сервис профилей auth

Работает следующим образом:

Методы без авторизации
- POST /profile - регистрирует профиль
- POST /login - если данные профиля правильные, создает сессию для профиля и добавляет в хранилище, добавляет куку session_id
- POST /logоut - берет из куки session_id, удаляет сессию из хранилища, удаляет куку

Методы с авторизацией

- GET /profile/{id} - если авторизация успешная, возвращает данные профиля
- PUT /profile/{id} - если авторизация успешная, редактирует данные профиля


Авторизация работает следующим образом:

Перед использованием метода, закрытого авторизацией, берется session_id из куки, ищется в хранилище сессий
- если сессия не найдена, возвращается 401 Unauthorized
- если сессия найдена, берется id профиля из сессии и проверяется, 
что id профиля на получение или изменение совпадает с id профиля из сессии
- если id профилей не совпадают, возвращается 401 Unauthorized
- если id профилей совпадают, запрошенный метод выполняется 



### Установка сервиса auth (namespace default)

```
helm install auth ./helm-charts/auth/

или

make helm_install_auth
```

### Проверка тестового сценария Postman (newman)
```
newman run ./postman/hw06-auth.postman_collection.json --verbose

или

make newman_run
```


### Удаление сервиса auth
```
helm uninstall auth

или

make helm_uninstall_auth
```


### Схема вхаимодействия
![Alt text](./pictures/auth.jpg?raw=true "")
